(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{286:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var three__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(581),_utils_createMultiMaterialObject__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__(617),__webpack_require__(583));__webpack_exports__.default=function(){var VIEWPORT_W=window.innerWidth,VIEWPORT_H=window.innerHeight,scene=new three__WEBPACK_IMPORTED_MODULE_0__.Scene,camera=new three__WEBPACK_IMPORTED_MODULE_0__.PerspectiveCamera(45,window.innerWidth/window.innerHeight,.1,1e3);camera.position.x=8,camera.lookAt(new three__WEBPACK_IMPORTED_MODULE_0__.Vector3(0,0,0));var renderer=new three__WEBPACK_IMPORTED_MODULE_0__.WebGLRenderer;renderer.setClearColor(new three__WEBPACK_IMPORTED_MODULE_0__.Color(0)),renderer.setSize(VIEWPORT_W,VIEWPORT_H);var selectedDebri,geom,textureLoader,planetTexture,specularTexture,normalTexture,planetMaterial,raycaster=new three__WEBPACK_IMPORTED_MODULE_0__.Raycaster,createStarPoints=function(num,size,center,radius,red){for(var geom=new three__WEBPACK_IMPORTED_MODULE_0__.Geometry,texture=(new three__WEBPACK_IMPORTED_MODULE_0__.TextureLoader).load(red?"./assets/lensflare0.png":"./assets/lensflare0_white.png"),material=new three__WEBPACK_IMPORTED_MODULE_0__.PointsMaterial({size:size,map:texture}),i=0;i<num;i++){var theta=2*Math.random()*Math.PI,phi=2*Math.random()*Math.PI,r=radius*(1.5+Math.random()/10),particle=new three__WEBPACK_IMPORTED_MODULE_0__.Vector3(r*Math.sin(theta)*Math.cos(phi),r*Math.sin(theta)*Math.sin(phi),r*Math.cos(theta));geom.vertices.push(particle)}return new three__WEBPACK_IMPORTED_MODULE_0__.Points(geom,material)},putDebriRandom=function(mesh,limitRadius,center){var theta=2*Math.random()*Math.PI,phi=2*Math.random()*Math.PI,r=2*limitRadius+Math.random()/100;mesh.position.set(center.x+r*Math.sin(theta)*Math.cos(phi),center.y+r*Math.sin(theta)*Math.sin(phi),center.z+r*Math.cos(theta))},createDebri=function(limitRadius,center){var geom=new three__WEBPACK_IMPORTED_MODULE_0__.BoxGeometry(1,1,1),material=new three__WEBPACK_IMPORTED_MODULE_0__.MeshPhongMaterial;material.color=new three__WEBPACK_IMPORTED_MODULE_0__.Color(16777215*Math.random()),material.emissive=new three__WEBPACK_IMPORTED_MODULE_0__.Color(3355443),material.specular=new three__WEBPACK_IMPORTED_MODULE_0__.Color(4474026),material.shininess=100;var mesh=new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(geom,material);return putDebriRandom(mesh,limitRadius,center),mesh.rotation.x=2*Math.random()*Math.PI,mesh.rotation.y=2*Math.random()*Math.PI,mesh.rotation.z=2*Math.random()*Math.PI,mesh.drotx=(Math.random()-.5)/10,mesh.droty=(Math.random()-.5)/10,mesh.drotz=(Math.random()-.5)/10,mesh},deselectDebri=function(){selectedDebri&&(selectedDebri.material.emissive.setHex(3355443),selectedDebri.scale.set(1,1,1)),selectedDebri=null},earth=(geom=new three__WEBPACK_IMPORTED_MODULE_0__.SphereGeometry(10,80,80),textureLoader=new three__WEBPACK_IMPORTED_MODULE_0__.TextureLoader,planetTexture=textureLoader.load("./assets/Earth.png"),specularTexture=textureLoader.load("./assets/EarthSpec.png"),normalTexture=textureLoader.load("./assets/EarthNormal.png"),(planetMaterial=new three__WEBPACK_IMPORTED_MODULE_0__.MeshPhongMaterial).specularMap=specularTexture,planetMaterial.specular=new three__WEBPACK_IMPORTED_MODULE_0__.Color(4474026),planetMaterial.shininess=5,planetMaterial.normalMap=normalTexture,planetMaterial.normalScale=new three__WEBPACK_IMPORTED_MODULE_0__.Vector2(5,5),planetMaterial.map=planetTexture,Object(_utils_createMultiMaterialObject__WEBPACK_IMPORTED_MODULE_2__.a)(geom,[planetMaterial]));earth.position.y=-10,scene.add(earth);var air=function(geom){var planetMaterial=new three__WEBPACK_IMPORTED_MODULE_0__.MeshPhongMaterial;return planetMaterial.side=three__WEBPACK_IMPORTED_MODULE_0__.BackSide,planetMaterial.transparent=!0,planetMaterial.opacity=.2,planetMaterial.color=new three__WEBPACK_IMPORTED_MODULE_0__.Color(16777215),Object(_utils_createMultiMaterialObject__WEBPACK_IMPORTED_MODULE_2__.a)(geom,[planetMaterial])}(new three__WEBPACK_IMPORTED_MODULE_0__.SphereGeometry(10.1,80,80));air.position.copy(earth.position),scene.add(air);var moon=function(geom){var textureLoader=new three__WEBPACK_IMPORTED_MODULE_0__.TextureLoader,planetTexture=textureLoader.load("./assets/Moon.png"),normalTexture=textureLoader.load("./assets/Mars-normalmap_2k.png"),planetMaterial=new three__WEBPACK_IMPORTED_MODULE_0__.MeshPhongMaterial;return planetMaterial.normalMap=normalTexture,planetMaterial.normalScale=new three__WEBPACK_IMPORTED_MODULE_0__.Vector2(5,5),planetMaterial.map=planetTexture,planetMaterial.specularMap=planetTexture,planetMaterial.specular=new three__WEBPACK_IMPORTED_MODULE_0__.Color(4473856),planetMaterial.shininess=0,new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(geom,planetMaterial)}(new three__WEBPACK_IMPORTED_MODULE_0__.SphereGeometry(5,20,20));moon.position.x=-50,earth.add(moon);earth.position;var rad=Math.abs(moon.position.x);earth.add(createStarPoints(100,5,0,rad,!0)),earth.add(createStarPoints(500,3,0,rad)),earth.add(createStarPoints(2e3,2,0,rad));for(var earthAndDebris=[earth],debris=[],i=0;i<30;i++){var debri=createDebri(10.2,earth.position);earth.add(debri),debris.push(debri);var earthGroup=new three__WEBPACK_IMPORTED_MODULE_0__.Group;earthGroup.add(debri),earthAndDebris.push(earthGroup)}var ambi=new three__WEBPACK_IMPORTED_MODULE_0__.AmbientLight(1579032);scene.add(ambi);var directionalLight=new three__WEBPACK_IMPORTED_MODULE_0__.DirectionalLight(16777215);directionalLight.position.set(100,0,150),earth.add(directionalLight);var directionalBackLight=new three__WEBPACK_IMPORTED_MODULE_0__.DirectionalLight(16777215);directionalBackLight.position.copy(directionalLight.position.clone().negate()),directionalBackLight.intensity=.7,earth.add(directionalBackLight),document.getElementById("WebGL-output").appendChild(renderer.domElement),renderer.domElement.addEventListener("click",function(){if(document.mozFullScreen||document.webkitIsFullScreen)limitRadius=10.2,center=earth.position,selectedDebri&&(putDebriRandom(selectedDebri,limitRadius,center),deselectDebri());else{var canvas=renderer.domElement;(canvas.mozRequestFullScreen||canvas.webkitRequestFullScreen).bind(canvas)()}var limitRadius,center}.bind(void 0)),window.addEventListener("resize",function(){camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight)},!1);var renderScene=function(){debris.forEach(function(debri){debri.rotation.x+=debri.drotx,debri.rotation.y+=debri.droty,debri.rotation.z+=debri.drotz}),function(){raycaster.setFromCamera({x:0,y:0},camera);var intersects=raycaster.intersectObjects(earthAndDebris);if(0===intersects.length)deselectDebri();else for(var i=0;i<intersects.length;i++){var debri=intersects[i].object;if(debri===earth){console.log(debri===earth);break}if(selectedDebri!==debri){deselectDebri(),selectedDebri=debri,debri.material.emissive.setHex(16724787),debri.scale.set(2,2,2);break}}}(),earth.rotation.z-=.001,requestAnimationFrame(renderScene)};renderScene()}},583:function(module,__webpack_exports__,__webpack_require__){"use strict";var three__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(581);__webpack_exports__.a=function(geometry,materials){var group=new three__WEBPACK_IMPORTED_MODULE_0__.Group;return materials.forEach(function(material){group.add(new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(geometry,material))}),group}},617:function(module,exports,__webpack_require__){__webpack_require__(581).WEBVR={createButton:function(renderer,options){function showEnterVR(device){button.style.display="",button.style.cursor="pointer",button.style.left="calc(50% - 50px)",button.style.width="100px",button.textContent="ENTER VR",button.onmouseenter=function(){button.style.opacity="1.0"},button.onmouseleave=function(){button.style.opacity="0.5"},button.onclick=function(){device.isPresenting?device.exitPresent():device.requestPresent([{source:renderer.domElement}])},renderer.vr.setDevice(device)}function disableButton(){button.style.display="",button.style.cursor="auto",button.style.left="calc(50% - 75px)",button.style.width="150px",button.onmouseenter=null,button.onmouseleave=null,button.onclick=null}function showVRNotFound(){disableButton(),button.textContent="VR NOT FOUND",renderer.vr.setDevice(null)}function stylizeElement(element){element.style.position="absolute",element.style.bottom="20px",element.style.padding="12px 6px",element.style.border="1px solid #fff",element.style.borderRadius="4px",element.style.background="rgba(0,0,0,0.1)",element.style.color="#fff",element.style.font="normal 13px sans-serif",element.style.textAlign="center",element.style.opacity="0.5",element.style.outline="none",element.style.zIndex="999"}var button;if(options&&options.referenceSpaceType&&renderer.vr.setReferenceSpaceType(options.referenceSpaceType),"xr"in navigator&&"supportsSession"in navigator.xr)return(button=document.createElement("button")).style.display="none",stylizeElement(button),navigator.xr.supportsSession("immersive-vr").then(function showEnterXR(){var currentSession=null;function onSessionStarted(session){session.addEventListener("end",onSessionEnded),renderer.vr.setSession(session),button.textContent="EXIT XR",currentSession=session}function onSessionEnded(){currentSession.removeEventListener("end",onSessionEnded),renderer.vr.setSession(null),button.textContent="ENTER XR",currentSession=null}button.style.display="",button.style.cursor="pointer",button.style.left="calc(50% - 50px)",button.style.width="100px",button.textContent="ENTER XR",button.onmouseenter=function(){button.style.opacity="1.0"},button.onmouseleave=function(){button.style.opacity="0.5"},button.onclick=function(){null===currentSession?navigator.xr.requestSession("immersive-vr").then(onSessionStarted):currentSession.end()}}).catch(function showXRNotFound(){disableButton(),button.textContent="XR NOT FOUND"}),button;if("getVRDisplays"in navigator)return(button=document.createElement("button")).style.display="none",stylizeElement(button),window.addEventListener("vrdisplayconnect",function(event){showEnterVR(event.display)},!1),window.addEventListener("vrdisplaydisconnect",function(){showVRNotFound()},!1),window.addEventListener("vrdisplaypresentchange",function(event){button.textContent=event.display.isPresenting?"EXIT VR":"ENTER VR"},!1),window.addEventListener("vrdisplayactivate",function(event){event.display.requestPresent([{source:renderer.domElement}])},!1),navigator.getVRDisplays().then(function(displays){displays.length>0?showEnterVR(displays[0]):showVRNotFound()}).catch(showVRNotFound),button;var message=document.createElement("a");return message.href="https://webvr.info",message.innerHTML="WEBVR NOT SUPPORTED",message.style.left="calc(50% - 90px)",message.style.width="180px",message.style.textDecoration="none",stylizeElement(message),message}}}}]);
//# sourceMappingURL=14.e7e55a58b9a4506b6cad.bundle.js.map