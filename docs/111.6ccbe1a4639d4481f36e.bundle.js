(window.webpackJsonp=window.webpackJsonp||[]).push([[111],{359:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var three__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(712),dat_gui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(714),_node_modules_three_examples_jsm_loaders_MMDLoader__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(773),_node_modules_three_examples_jsm_animation_MMDAnimationHelper__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(810);window.Ammo=__webpack_require__(803)(),__webpack_exports__.default=function(){var VIEWPORT_W=window.innerWidth,VIEWPORT_H=window.innerHeight,scene=new three__WEBPACK_IMPORTED_MODULE_0__.Scene,camera=new three__WEBPACK_IMPORTED_MODULE_0__.PerspectiveCamera(45,VIEWPORT_W/VIEWPORT_H,1,2e3);camera.position.z=30,camera.lookAt(scene.position);var renderer=new three__WEBPACK_IMPORTED_MODULE_0__.WebGLRenderer({antialias:!0});renderer.setPixelRatio(window.devicePixelRatio),renderer.setSize(VIEWPORT_W,VIEWPORT_H),renderer.setClearColor(new three__WEBPACK_IMPORTED_MODULE_0__.Color(16777215));var ambient=new three__WEBPACK_IMPORTED_MODULE_0__.AmbientLight(8947848);scene.add(ambient);var directionalLight=new three__WEBPACK_IMPORTED_MODULE_0__.DirectionalLight(6710886);directionalLight.position.set(-1,1,1).normalize(),scene.add(directionalLight);var mesh,onProgress=function(xhr){if(xhr.lengthComputable){var percentComplete=xhr.loaded/xhr.total*100;console.log(Math.round(percentComplete)+"% downloaded")}},onError=function(error){console.log("ERROR:",error)},vpds=[],helper=new _node_modules_three_examples_jsm_animation_MMDAnimationHelper__WEBPACK_IMPORTED_MODULE_3__.a,loader=new _node_modules_three_examples_jsm_loaders_MMDLoader__WEBPACK_IMPORTED_MODULE_2__.a,vpdFiles=["vpds/01.vpd","vpds/02.vpd","vpds/03.vpd","vpds/04.vpd","vpds/05.vpd","vpds/06.vpd","vpds/07.vpd","vpds/08.vpd","vpds/09.vpd","vpds/10.vpd","vpds/11.vpd"];loader.load("model/kizunaai.pmx",(function(pmx){(mesh=pmx).position.y=-10,scene.add(mesh);var vpdIndex=0,loadVpd=function(){var vpdFile=vpdFiles[vpdIndex];loader.loadVPD(vpdFile,!1,(function(vpd){var gui,dictionary,controls,keys,files,poses,morphs,getBaseName,onChangeMorph,onChangePose;vpds.push(vpd),++vpdIndex<vpdFiles.length?loadVpd():(gui=new dat_gui__WEBPACK_IMPORTED_MODULE_1__.a,dictionary=mesh.morphTargetDictionary,controls={},keys=[],files={default:-1},poses=gui.addFolder("Poses"),morphs=gui.addFolder("Morphs"),getBaseName=function(s){return s.slice(s.lastIndexOf("/")+1)},onChangeMorph=function(){keys.forEach((function(key,i){mesh.morphTargetInfluences[i]=controls[key]}))},onChangePose=function(){var index=parseInt(controls.pose);-1===index?mesh.pose():helper.pose(mesh,vpds[index])},controls.pose=-1,vpdFiles.forEach((function(file,i){controls[getBaseName(file)]=!1,files[getBaseName(file)]=i})),poses.add(controls,"pose",files).onChange(onChangePose),Object.keys(dictionary).forEach((function(key){controls[key]=0,keys.push(key),morphs.add(controls,key,0,1,.01).onChange(onChangeMorph)})),onChangeMorph(),onChangePose(),poses.open(),morphs.open())}),onProgress,onError)};loadVpd()}),onProgress,onError),document.getElementById("WebGL-output").appendChild(renderer.domElement),window.addEventListener("resize",(function(){camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight)}),!1);var renderScene=function(){camera.lookAt(scene.position),requestAnimationFrame(renderScene),renderer.render(scene,camera)};renderScene();var copyright=document.createElement("span");copyright.innerHTML="Â© Kizuna AI",copyright.className="copyright",document.body.appendChild(copyright)}}}]);
//# sourceMappingURL=111.6ccbe1a4639d4481f36e.bundle.js.map