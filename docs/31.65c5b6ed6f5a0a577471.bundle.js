(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{719:function(module,exports,__webpack_require__){var f;module.exports=((f=function(){function e(a){return c.appendChild(a.dom),a}function u(a){for(var d=0;d<c.children.length;d++)c.children[d].style.display=d===a?"block":"none";l=a}var l=0,c=document.createElement("div");c.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",c.addEventListener("click",(function(a){a.preventDefault(),u(++l%c.children.length)}),!1);var k=(performance||Date).now(),g=k,a=0,r=e(new f.Panel("FPS","#0ff","#002")),h=e(new f.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var t=e(new f.Panel("MB","#f08","#201"));return u(0),{REVISION:16,dom:c,addPanel:e,showPanel:u,begin:function(){k=(performance||Date).now()},end:function(){a++;var c=(performance||Date).now();if(h.update(c-k,200),c>g+1e3&&(r.update(1e3*a/(c-g),100),g=c,a=0,t)){var d=performance.memory;t.update(d.usedJSHeapSize/1048576,d.jsHeapSizeLimit/1048576)}return c},update:function(){k=this.end()},domElement:c,setMode:u}}).Panel=function(e,f,l){var c=1/0,k=0,g=Math.round,a=g(window.devicePixelRatio||1),r=80*a,h=48*a,t=3*a,v=2*a,d=3*a,m=15*a,n=74*a,p=30*a,q=document.createElement("canvas");q.width=r,q.height=h,q.style.cssText="width:80px;height:48px";var b=q.getContext("2d");return b.font="bold "+9*a+"px Helvetica,Arial,sans-serif",b.textBaseline="top",b.fillStyle=l,b.fillRect(0,0,r,h),b.fillStyle=f,b.fillText(e,t,v),b.fillRect(d,m,n,p),b.fillStyle=l,b.globalAlpha=.9,b.fillRect(d,m,n,p),{dom:q,update:function(h,w){c=Math.min(c,h),k=Math.max(k,h),b.fillStyle=l,b.globalAlpha=1,b.fillRect(0,0,r,m),b.fillStyle=f,b.fillText(g(h)+" "+e+" ("+g(c)+"-"+g(k)+")",t,v),b.drawImage(q,d+a,m,n-a,p,d,m,n-a,p),b.fillRect(d+n-a,m,a,p),b.fillStyle=l,b.globalAlpha=.9,b.fillRect(d+n-a,m,a,g((1-h/w)*p))}}},f)},724:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return OrbitControls}));var _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(718),OrbitControls=function(object,domElement){var offset,quat,quatInverse,lastPosition,lastQuaternion;void 0===domElement&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),domElement===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=object,this.domElement=domElement,this.enabled=!0,this.target=new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:_build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MOUSE.ROTATE,MIDDLE:_build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MOUSE.DOLLY,RIGHT:_build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MOUSE.PAN},this.touches={ONE:_build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.TOUCH.ROTATE,TWO:_build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return spherical.phi},this.getAzimuthalAngle=function(){return spherical.theta},this.saveState=function(){scope.target0.copy(scope.target),scope.position0.copy(scope.object.position),scope.zoom0=scope.object.zoom},this.reset=function(){scope.target.copy(scope.target0),scope.object.position.copy(scope.position0),scope.object.zoom=scope.zoom0,scope.object.updateProjectionMatrix(),scope.dispatchEvent(changeEvent),scope.update(),state=STATE.NONE},this.update=(offset=new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector3,quat=(new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Quaternion).setFromUnitVectors(object.up,new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector3(0,1,0)),quatInverse=quat.clone().inverse(),lastPosition=new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector3,lastQuaternion=new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Quaternion,function update(){var position=scope.object.position;return offset.copy(position).sub(scope.target),offset.applyQuaternion(quat),spherical.setFromVector3(offset),scope.autoRotate&&state===STATE.NONE&&rotateLeft(function getAutoRotationAngle(){return 2*Math.PI/60/60*scope.autoRotateSpeed}()),scope.enableDamping?(spherical.theta+=sphericalDelta.theta*scope.dampingFactor,spherical.phi+=sphericalDelta.phi*scope.dampingFactor):(spherical.theta+=sphericalDelta.theta,spherical.phi+=sphericalDelta.phi),spherical.theta=Math.max(scope.minAzimuthAngle,Math.min(scope.maxAzimuthAngle,spherical.theta)),spherical.phi=Math.max(scope.minPolarAngle,Math.min(scope.maxPolarAngle,spherical.phi)),spherical.makeSafe(),spherical.radius*=scale,spherical.radius=Math.max(scope.minDistance,Math.min(scope.maxDistance,spherical.radius)),!0===scope.enableDamping?scope.target.addScaledVector(panOffset,scope.dampingFactor):scope.target.add(panOffset),offset.setFromSpherical(spherical),offset.applyQuaternion(quatInverse),position.copy(scope.target).add(offset),scope.object.lookAt(scope.target),!0===scope.enableDamping?(sphericalDelta.theta*=1-scope.dampingFactor,sphericalDelta.phi*=1-scope.dampingFactor,panOffset.multiplyScalar(1-scope.dampingFactor)):(sphericalDelta.set(0,0,0),panOffset.set(0,0,0)),scale=1,!!(zoomChanged||lastPosition.distanceToSquared(scope.object.position)>EPS||8*(1-lastQuaternion.dot(scope.object.quaternion))>EPS)&&(scope.dispatchEvent(changeEvent),lastPosition.copy(scope.object.position),lastQuaternion.copy(scope.object.quaternion),zoomChanged=!1,!0)}),this.dispose=function(){scope.domElement.removeEventListener("contextmenu",onContextMenu,!1),scope.domElement.removeEventListener("mousedown",onMouseDown,!1),scope.domElement.removeEventListener("wheel",onMouseWheel,!1),scope.domElement.removeEventListener("touchstart",onTouchStart,!1),scope.domElement.removeEventListener("touchend",onTouchEnd,!1),scope.domElement.removeEventListener("touchmove",onTouchMove,!1),document.removeEventListener("mousemove",onMouseMove,!1),document.removeEventListener("mouseup",onMouseUp,!1),scope.domElement.removeEventListener("keydown",onKeyDown,!1)};var scope=this,changeEvent={type:"change"},startEvent={type:"start"},endEvent={type:"end"},STATE={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},state=STATE.NONE,EPS=1e-6,spherical=new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Spherical,sphericalDelta=new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Spherical,scale=1,panOffset=new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector3,zoomChanged=!1,rotateStart=new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector2,rotateEnd=new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector2,rotateDelta=new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector2,panStart=new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector2,panEnd=new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector2,panDelta=new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector2,dollyStart=new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector2,dollyEnd=new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector2,dollyDelta=new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector2;function getZoomScale(){return Math.pow(.95,scope.zoomSpeed)}function rotateLeft(angle){sphericalDelta.theta-=angle}function rotateUp(angle){sphericalDelta.phi-=angle}var v,panLeft=(v=new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector3,function panLeft(distance,objectMatrix){v.setFromMatrixColumn(objectMatrix,0),v.multiplyScalar(-distance),panOffset.add(v)}),panUp=function(){var v=new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector3;return function panUp(distance,objectMatrix){!0===scope.screenSpacePanning?v.setFromMatrixColumn(objectMatrix,1):(v.setFromMatrixColumn(objectMatrix,0),v.crossVectors(scope.object.up,v)),v.multiplyScalar(distance),panOffset.add(v)}}(),pan=function(){var offset=new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector3;return function pan(deltaX,deltaY){var element=scope.domElement;if(scope.object.isPerspectiveCamera){var position=scope.object.position;offset.copy(position).sub(scope.target);var targetDistance=offset.length();targetDistance*=Math.tan(scope.object.fov/2*Math.PI/180),panLeft(2*deltaX*targetDistance/element.clientHeight,scope.object.matrix),panUp(2*deltaY*targetDistance/element.clientHeight,scope.object.matrix)}else scope.object.isOrthographicCamera?(panLeft(deltaX*(scope.object.right-scope.object.left)/scope.object.zoom/element.clientWidth,scope.object.matrix),panUp(deltaY*(scope.object.top-scope.object.bottom)/scope.object.zoom/element.clientHeight,scope.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),scope.enablePan=!1)}}();function dollyIn(dollyScale){scope.object.isPerspectiveCamera?scale/=dollyScale:scope.object.isOrthographicCamera?(scope.object.zoom=Math.max(scope.minZoom,Math.min(scope.maxZoom,scope.object.zoom*dollyScale)),scope.object.updateProjectionMatrix(),zoomChanged=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),scope.enableZoom=!1)}function dollyOut(dollyScale){scope.object.isPerspectiveCamera?scale*=dollyScale:scope.object.isOrthographicCamera?(scope.object.zoom=Math.max(scope.minZoom,Math.min(scope.maxZoom,scope.object.zoom/dollyScale)),scope.object.updateProjectionMatrix(),zoomChanged=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),scope.enableZoom=!1)}function handleMouseDownRotate(event){rotateStart.set(event.clientX,event.clientY)}function handleMouseDownPan(event){panStart.set(event.clientX,event.clientY)}function handleTouchStartRotate(event){if(1==event.touches.length)rotateStart.set(event.touches[0].pageX,event.touches[0].pageY);else{var x=.5*(event.touches[0].pageX+event.touches[1].pageX),y=.5*(event.touches[0].pageY+event.touches[1].pageY);rotateStart.set(x,y)}}function handleTouchStartPan(event){if(1==event.touches.length)panStart.set(event.touches[0].pageX,event.touches[0].pageY);else{var x=.5*(event.touches[0].pageX+event.touches[1].pageX),y=.5*(event.touches[0].pageY+event.touches[1].pageY);panStart.set(x,y)}}function handleTouchStartDolly(event){var dx=event.touches[0].pageX-event.touches[1].pageX,dy=event.touches[0].pageY-event.touches[1].pageY,distance=Math.sqrt(dx*dx+dy*dy);dollyStart.set(0,distance)}function handleTouchMoveRotate(event){if(1==event.touches.length)rotateEnd.set(event.touches[0].pageX,event.touches[0].pageY);else{var x=.5*(event.touches[0].pageX+event.touches[1].pageX),y=.5*(event.touches[0].pageY+event.touches[1].pageY);rotateEnd.set(x,y)}rotateDelta.subVectors(rotateEnd,rotateStart).multiplyScalar(scope.rotateSpeed);var element=scope.domElement;rotateLeft(2*Math.PI*rotateDelta.x/element.clientHeight),rotateUp(2*Math.PI*rotateDelta.y/element.clientHeight),rotateStart.copy(rotateEnd)}function handleTouchMovePan(event){if(1==event.touches.length)panEnd.set(event.touches[0].pageX,event.touches[0].pageY);else{var x=.5*(event.touches[0].pageX+event.touches[1].pageX),y=.5*(event.touches[0].pageY+event.touches[1].pageY);panEnd.set(x,y)}panDelta.subVectors(panEnd,panStart).multiplyScalar(scope.panSpeed),pan(panDelta.x,panDelta.y),panStart.copy(panEnd)}function handleTouchMoveDolly(event){var dx=event.touches[0].pageX-event.touches[1].pageX,dy=event.touches[0].pageY-event.touches[1].pageY,distance=Math.sqrt(dx*dx+dy*dy);dollyEnd.set(0,distance),dollyDelta.set(0,Math.pow(dollyEnd.y/dollyStart.y,scope.zoomSpeed)),dollyIn(dollyDelta.y),dollyStart.copy(dollyEnd)}function onMouseDown(event){if(!1!==scope.enabled){switch(event.preventDefault(),scope.domElement.focus?scope.domElement.focus():window.focus(),event.button){case 0:switch(scope.mouseButtons.LEFT){case _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MOUSE.ROTATE:if(event.ctrlKey||event.metaKey||event.shiftKey){if(!1===scope.enablePan)return;handleMouseDownPan(event),state=STATE.PAN}else{if(!1===scope.enableRotate)return;handleMouseDownRotate(event),state=STATE.ROTATE}break;case _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MOUSE.PAN:if(event.ctrlKey||event.metaKey||event.shiftKey){if(!1===scope.enableRotate)return;handleMouseDownRotate(event),state=STATE.ROTATE}else{if(!1===scope.enablePan)return;handleMouseDownPan(event),state=STATE.PAN}break;default:state=STATE.NONE}break;case 1:switch(scope.mouseButtons.MIDDLE){case _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MOUSE.DOLLY:if(!1===scope.enableZoom)return;!function handleMouseDownDolly(event){dollyStart.set(event.clientX,event.clientY)}(event),state=STATE.DOLLY;break;default:state=STATE.NONE}break;case 2:switch(scope.mouseButtons.RIGHT){case _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MOUSE.ROTATE:if(!1===scope.enableRotate)return;handleMouseDownRotate(event),state=STATE.ROTATE;break;case _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MOUSE.PAN:if(!1===scope.enablePan)return;handleMouseDownPan(event),state=STATE.PAN;break;default:state=STATE.NONE}}state!==STATE.NONE&&(document.addEventListener("mousemove",onMouseMove,!1),document.addEventListener("mouseup",onMouseUp,!1),scope.dispatchEvent(startEvent))}}function onMouseMove(event){if(!1!==scope.enabled)switch(event.preventDefault(),state){case STATE.ROTATE:if(!1===scope.enableRotate)return;!function handleMouseMoveRotate(event){rotateEnd.set(event.clientX,event.clientY),rotateDelta.subVectors(rotateEnd,rotateStart).multiplyScalar(scope.rotateSpeed);var element=scope.domElement;rotateLeft(2*Math.PI*rotateDelta.x/element.clientHeight),rotateUp(2*Math.PI*rotateDelta.y/element.clientHeight),rotateStart.copy(rotateEnd),scope.update()}(event);break;case STATE.DOLLY:if(!1===scope.enableZoom)return;!function handleMouseMoveDolly(event){dollyEnd.set(event.clientX,event.clientY),dollyDelta.subVectors(dollyEnd,dollyStart),dollyDelta.y>0?dollyIn(getZoomScale()):dollyDelta.y<0&&dollyOut(getZoomScale()),dollyStart.copy(dollyEnd),scope.update()}(event);break;case STATE.PAN:if(!1===scope.enablePan)return;!function handleMouseMovePan(event){panEnd.set(event.clientX,event.clientY),panDelta.subVectors(panEnd,panStart).multiplyScalar(scope.panSpeed),pan(panDelta.x,panDelta.y),panStart.copy(panEnd),scope.update()}(event)}}function onMouseUp(event){!1!==scope.enabled&&(document.removeEventListener("mousemove",onMouseMove,!1),document.removeEventListener("mouseup",onMouseUp,!1),scope.dispatchEvent(endEvent),state=STATE.NONE)}function onMouseWheel(event){!1===scope.enabled||!1===scope.enableZoom||state!==STATE.NONE&&state!==STATE.ROTATE||(event.preventDefault(),event.stopPropagation(),scope.dispatchEvent(startEvent),function handleMouseWheel(event){event.deltaY<0?dollyOut(getZoomScale()):event.deltaY>0&&dollyIn(getZoomScale()),scope.update()}(event),scope.dispatchEvent(endEvent))}function onKeyDown(event){!1!==scope.enabled&&!1!==scope.enableKeys&&!1!==scope.enablePan&&function handleKeyDown(event){var needsUpdate=!1;switch(event.keyCode){case scope.keys.UP:pan(0,scope.keyPanSpeed),needsUpdate=!0;break;case scope.keys.BOTTOM:pan(0,-scope.keyPanSpeed),needsUpdate=!0;break;case scope.keys.LEFT:pan(scope.keyPanSpeed,0),needsUpdate=!0;break;case scope.keys.RIGHT:pan(-scope.keyPanSpeed,0),needsUpdate=!0}needsUpdate&&(event.preventDefault(),scope.update())}(event)}function onTouchStart(event){if(!1!==scope.enabled){switch(event.preventDefault(),event.touches.length){case 1:switch(scope.touches.ONE){case _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.TOUCH.ROTATE:if(!1===scope.enableRotate)return;handleTouchStartRotate(event),state=STATE.TOUCH_ROTATE;break;case _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.TOUCH.PAN:if(!1===scope.enablePan)return;handleTouchStartPan(event),state=STATE.TOUCH_PAN;break;default:state=STATE.NONE}break;case 2:switch(scope.touches.TWO){case _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.TOUCH.DOLLY_PAN:if(!1===scope.enableZoom&&!1===scope.enablePan)return;!function handleTouchStartDollyPan(event){scope.enableZoom&&handleTouchStartDolly(event),scope.enablePan&&handleTouchStartPan(event)}(event),state=STATE.TOUCH_DOLLY_PAN;break;case _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.TOUCH.DOLLY_ROTATE:if(!1===scope.enableZoom&&!1===scope.enableRotate)return;!function handleTouchStartDollyRotate(event){scope.enableZoom&&handleTouchStartDolly(event),scope.enableRotate&&handleTouchStartRotate(event)}(event),state=STATE.TOUCH_DOLLY_ROTATE;break;default:state=STATE.NONE}break;default:state=STATE.NONE}state!==STATE.NONE&&scope.dispatchEvent(startEvent)}}function onTouchMove(event){if(!1!==scope.enabled)switch(event.preventDefault(),event.stopPropagation(),state){case STATE.TOUCH_ROTATE:if(!1===scope.enableRotate)return;handleTouchMoveRotate(event),scope.update();break;case STATE.TOUCH_PAN:if(!1===scope.enablePan)return;handleTouchMovePan(event),scope.update();break;case STATE.TOUCH_DOLLY_PAN:if(!1===scope.enableZoom&&!1===scope.enablePan)return;!function handleTouchMoveDollyPan(event){scope.enableZoom&&handleTouchMoveDolly(event),scope.enablePan&&handleTouchMovePan(event)}(event),scope.update();break;case STATE.TOUCH_DOLLY_ROTATE:if(!1===scope.enableZoom&&!1===scope.enableRotate)return;!function handleTouchMoveDollyRotate(event){scope.enableZoom&&handleTouchMoveDolly(event),scope.enableRotate&&handleTouchMoveRotate(event)}(event),scope.update();break;default:state=STATE.NONE}}function onTouchEnd(event){!1!==scope.enabled&&(scope.dispatchEvent(endEvent),state=STATE.NONE)}function onContextMenu(event){!1!==scope.enabled&&event.preventDefault()}scope.domElement.addEventListener("contextmenu",onContextMenu,!1),scope.domElement.addEventListener("mousedown",onMouseDown,!1),scope.domElement.addEventListener("wheel",onMouseWheel,!1),scope.domElement.addEventListener("touchstart",onTouchStart,!1),scope.domElement.addEventListener("touchend",onTouchEnd,!1),scope.domElement.addEventListener("touchmove",onTouchMove,!1),scope.domElement.addEventListener("keydown",onKeyDown,!1),-1===scope.domElement.tabIndex&&(scope.domElement.tabIndex=0),this.update()};OrbitControls.prototype=Object.create(_build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.EventDispatcher.prototype),OrbitControls.prototype.constructor=OrbitControls;var MapControls=function(object,domElement){OrbitControls.call(this,object,domElement),this.mouseButtons.LEFT=_build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MOUSE.PAN,this.mouseButtons.RIGHT=_build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MOUSE.ROTATE,this.touches.ONE=_build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.TOUCH.PAN,this.touches.TWO=_build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.TOUCH.DOLLY_ROTATE};(MapControls.prototype=Object.create(_build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.EventDispatcher.prototype)).constructor=MapControls},802:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return AssimpLoader}));var _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(718),AssimpLoader=function(manager){_build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Loader.call(this,manager)};AssimpLoader.prototype=Object.assign(Object.create(_build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Loader.prototype),{constructor:AssimpLoader,load:function(url,onLoad,onProgress,onError){var scope=this,path=""===scope.path?_build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.LoaderUtils.extractUrlBase(url):scope.path,loader=new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.FileLoader(this.manager);loader.setPath(scope.path),loader.setResponseType("arraybuffer"),loader.load(url,(function(buffer){onLoad(scope.parse(buffer,path))}),onProgress,onError)},parse:function(buffer,path){var textureLoader=new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.TextureLoader(this.manager);textureLoader.setPath(this.resourcePath||path).setCrossOrigin(this.crossOrigin);var Virtulous={KeyFrame:function(time,matrix){this.time=time,this.matrix=matrix.clone(),this.position=new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector3,this.quaternion=new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Quaternion,this.scale=new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector3(1,1,1),this.matrix.decompose(this.position,this.quaternion,this.scale),this.clone=function(){return new Virtulous.KeyFrame(this.time,this.matrix)},this.lerp=function(nextKey,time){var l=(time-=this.time)/(nextKey.time-this.time),l2=1-l,keypos=this.position,keyrot=this.quaternion,key2pos=nextKey.position,key2rot=nextKey.quaternion;return Virtulous.KeyFrame.tempAniPos.x=keypos.x*l2+key2pos.x*l,Virtulous.KeyFrame.tempAniPos.y=keypos.y*l2+key2pos.y*l,Virtulous.KeyFrame.tempAniPos.z=keypos.z*l2+key2pos.z*l,Virtulous.KeyFrame.tempAniQuat.set(keyrot.x,keyrot.y,keyrot.z,keyrot.w),Virtulous.KeyFrame.tempAniQuat.slerp(key2rot,l),Virtulous.KeyFrame.tempAniMatrix.compose(Virtulous.KeyFrame.tempAniPos,Virtulous.KeyFrame.tempAniQuat,Virtulous.KeyFrame.tempAniScale)}}};Virtulous.KeyFrame.tempAniPos=new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector3,Virtulous.KeyFrame.tempAniQuat=new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Quaternion,Virtulous.KeyFrame.tempAniScale=new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector3(1,1,1),Virtulous.KeyFrame.tempAniMatrix=new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Matrix4,Virtulous.KeyFrameTrack=function(){this.keys=[],this.target=null,this.time=0,this.length=0,this._accelTable={},this.fps=20,this.addKey=function(key){this.keys.push(key)},this.init=function(){if(this.sortKeys(),this.keys.length>0?this.length=this.keys[this.keys.length-1].time:this.length=0,this.fps)for(var j=0;j<this.length*this.fps;j++)for(var i=0;i<this.keys.length;i++){if(this.keys[i].time==j){this._accelTable[j]=i;break}if(this.keys[i].time<j/this.fps&&this.keys[i+1]&&this.keys[i+1].time>=j/this.fps){this._accelTable[j]=i;break}}},this.parseFromThree=function(data){var fps=data.fps;this.target=data.node;for(var track=data.hierarchy[0].keys,i=0;i<track.length;i++)this.addKey(new Virtulous.KeyFrame(i/fps||track[i].time,track[i].targets[0].data));this.init()},this.parseFromCollada=function(data){for(var track=data.keys,fps=this.fps,i=0;i<track.length;i++)this.addKey(new Virtulous.KeyFrame(i/fps||track[i].time,track[i].matrix));this.init()},this.sortKeys=function(){this.keys.sort(this.keySortFunc)},this.keySortFunc=function(a,b){return a.time-b.time},this.clone=function(){var t=new Virtulous.KeyFrameTrack;t.target=this.target,t.time=this.time,t.length=this.length;for(var i=0;i<this.keys.length;i++)t.addKey(this.keys[i].clone());return t.init(),t},this.reTarget=function(root,compareitor){compareitor||(compareitor=Virtulous.TrackTargetNodeNameCompare),this.target=compareitor(root,this.target)},this.keySearchAccel=function(time){return time*=this.fps,time=Math.floor(time),this._accelTable[time]||0},this.setTime=function(time){time=Math.abs(time),this.length&&(time=time%this.length+.05);for(var key0=null,key1=null,i=this.keySearchAccel(time);i<this.keys.length;i++){if(this.keys[i].time==time){key0=this.keys[i],key1=this.keys[i];break}if(this.keys[i].time<time&&this.keys[i+1]&&this.keys[i+1].time>time){key0=this.keys[i],key1=this.keys[i+1];break}if(this.keys[i].time<time&&i==this.keys.length-1){key0=this.keys[i],(key1=this.keys[0].clone()).time+=this.length+.05;break}}return key0&&key1&&key0!==key1?(this.target.matrixAutoUpdate=!1,this.target.matrix.copy(key0.lerp(key1,time)),void(this.target.matrixWorldNeedsUpdate=!0)):key0&&key1&&key0==key1?(this.target.matrixAutoUpdate=!1,this.target.matrix.copy(key0.matrix),void(this.target.matrixWorldNeedsUpdate=!0)):void 0}},Virtulous.TrackTargetNodeNameCompare=function(root,target){return function find(node,name){if(node.name==name)return node;for(var i=0;i<node.children.length;i++){var r=find(node.children[i],name);if(r)return r}return null}(root,target.name)},Virtulous.Animation=function(){this.tracks=[],this.length=0,this.addTrack=function(track){this.tracks.push(track),this.length=Math.max(track.length,this.length)},this.setTime=function(time){this.time=time;for(var i=0;i<this.tracks.length;i++)this.tracks[i].setTime(time)},this.clone=function(target,compareitor){compareitor||(compareitor=Virtulous.TrackTargetNodeNameCompare);var n=new Virtulous.Animation;n.target=target;for(var i=0;i<this.tracks.length;i++){var track=this.tracks[i].clone();track.reTarget(target,compareitor),n.addTrack(track)}return n}};var ASSBIN_CHUNK_AICAMERA=4660,ASSBIN_CHUNK_AILIGHT=4661,ASSBIN_CHUNK_AITEXTURE=4662,ASSBIN_CHUNK_AIMESH=4663,ASSBIN_CHUNK_AINODEANIM=4664,ASSBIN_CHUNK_AISCENE=4665,ASSBIN_CHUNK_AIBONE=4666,ASSBIN_CHUNK_AIANIMATION=4667,ASSBIN_CHUNK_AINODE=4668,ASSBIN_CHUNK_AIMATERIAL=4669,ASSBIN_CHUNK_AIMATERIALPROPERTY=4670,ASSBIN_MESH_HAS_POSITIONS=1,ASSBIN_MESH_HAS_NORMALS=2,ASSBIN_MESH_HAS_TANGENTS_AND_BITANGENTS=4,ASSBIN_MESH_HAS_TEXCOORD_BASE=256,ASSBIN_MESH_HAS_COLOR_BASE=65536,AI_MAX_NUMBER_OF_COLOR_SETS=1,AI_MAX_NUMBER_OF_TEXTURECOORDS=4,aiLightSource_DIRECTIONAL=1,aiLightSource_SPOT=3,aiTextureType_DIFFUSE=1,aiTextureType_NORMALS=6,aiTextureType_OPACITY=8,aiTextureType_LIGHTMAP=10,BONESPERVERT=4;function ASSBIN_MESH_HAS_TEXCOORD(n){return ASSBIN_MESH_HAS_TEXCOORD_BASE<<n}function ASSBIN_MESH_HAS_COLOR(n){return ASSBIN_MESH_HAS_COLOR_BASE<<n}function cloneTreeToBones(root,scene){var rootBone=new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Bone;for(var i in rootBone.matrix.copy(root.matrix),rootBone.matrixWorld.copy(root.matrixWorld),rootBone.position.copy(root.position),rootBone.quaternion.copy(root.quaternion),rootBone.scale.copy(root.scale),scene.nodeCount++,rootBone.name="bone_"+root.name+scene.nodeCount.toString(),scene.nodeToBoneMap[root.name]||(scene.nodeToBoneMap[root.name]=[]),scene.nodeToBoneMap[root.name].push(rootBone),root.children){var child=cloneTreeToBones(root.children[i],scene);rootBone.add(child)}return rootBone}function sortWeights(indexes,weights){for(var pairs=[],i=0;i<indexes.length;i++)pairs.push({i:indexes[i],w:weights[i]});for(pairs.sort((function(a,b){return b.w-a.w}));pairs.length<4;)pairs.push({i:0,w:0});pairs.length>4&&(pairs.length=4);var sum=0;for(i=0;i<4;i++)sum+=pairs[i].w*pairs[i].w;sum=Math.sqrt(sum);for(i=0;i<4;i++)pairs[i].w=pairs[i].w/sum,indexes[i]=pairs[i].i,weights[i]=pairs[i].w}function findMatchingBone(root,name){if(0==root.name.indexOf("bone_"+name))return root;for(var i in root.children){var ret=findMatchingBone(root.children[i],name);if(ret)return ret}}function aiMesh(){this.mPrimitiveTypes=0,this.mNumVertices=0,this.mNumFaces=0,this.mNumBones=0,this.mMaterialIndex=0,this.mVertices=[],this.mNormals=[],this.mTangents=[],this.mBitangents=[],this.mColors=[[]],this.mTextureCoords=[[]],this.mFaces=[],this.mBones=[],this.hookupSkeletons=function(scene){if(0!=this.mBones.length){for(var allBones=[],offsetMatrix=[],skeletonRoot=scene.findNode(this.mBones[0].mName);skeletonRoot.mParent&&skeletonRoot.mParent.isBone;)skeletonRoot=skeletonRoot.mParent;var threeSkeletonRootBone=cloneTreeToBones(skeletonRoot.toTHREE(scene),scene);this.threeNode.add(threeSkeletonRootBone);for(var i=0;i<this.mBones.length;i++){if(bone=findMatchingBone(threeSkeletonRootBone,this.mBones[i].mName)){var tbone=bone;allBones.push(tbone),offsetMatrix.push(this.mBones[i].mOffsetMatrix.toTHREE())}else{if(!(skeletonRoot=scene.findNode(this.mBones[i].mName)))return;threeSkeletonRootBone=cloneTreeToBones(skeletonRoot.toTHREE(scene),scene);this.threeNode.add(threeSkeletonRootBone);var bone;tbone=bone=findMatchingBone(threeSkeletonRootBone,this.mBones[i].mName);allBones.push(tbone),offsetMatrix.push(this.mBones[i].mOffsetMatrix.toTHREE())}}var skeleton=new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Skeleton(allBones,offsetMatrix);this.threeNode.bind(skeleton,new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Matrix4),this.threeNode.material.skinning=!0}},this.toTHREE=function(scene){if(this.threeNode)return this.threeNode;var mat,mesh,geometry=new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.BufferGeometry;if(mat=scene.mMaterials[this.mMaterialIndex]?scene.mMaterials[this.mMaterialIndex].toTHREE(scene):new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshLambertMaterial,geometry.setIndex(new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.BufferAttribute(new Uint32Array(this.mIndexArray),1)),geometry.setAttribute("position",new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.BufferAttribute(this.mVertexBuffer,3)),this.mNormalBuffer&&this.mNormalBuffer.length>0&&geometry.setAttribute("normal",new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.BufferAttribute(this.mNormalBuffer,3)),this.mColorBuffer&&this.mColorBuffer.length>0&&geometry.setAttribute("color",new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.BufferAttribute(this.mColorBuffer,4)),this.mTexCoordsBuffers[0]&&this.mTexCoordsBuffers[0].length>0&&geometry.setAttribute("uv",new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.BufferAttribute(new Float32Array(this.mTexCoordsBuffers[0]),2)),this.mTexCoordsBuffers[1]&&this.mTexCoordsBuffers[1].length>0&&geometry.setAttribute("uv1",new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.BufferAttribute(new Float32Array(this.mTexCoordsBuffers[1]),2)),this.mTangentBuffer&&this.mTangentBuffer.length>0&&geometry.setAttribute("tangents",new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.BufferAttribute(this.mTangentBuffer,3)),this.mBitangentBuffer&&this.mBitangentBuffer.length>0&&geometry.setAttribute("bitangents",new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.BufferAttribute(this.mBitangentBuffer,3)),this.mBones.length>0){for(var weights=[],bones=[],i=0;i<this.mBones.length;i++)for(var j=0;j<this.mBones[i].mWeights.length;j++){var weight=this.mBones[i].mWeights[j];weight&&(weights[weight.mVertexId]||(weights[weight.mVertexId]=[]),bones[weight.mVertexId]||(bones[weight.mVertexId]=[]),weights[weight.mVertexId].push(weight.mWeight),bones[weight.mVertexId].push(parseInt(i)))}for(var i in bones)sortWeights(bones[i],weights[i]);var _weights=[],_bones=[];for(i=0;i<weights.length;i++)for(j=0;j<4;j++)weights[i]&&bones[i]?(_weights.push(weights[i][j]),_bones.push(bones[i][j])):(_weights.push(0),_bones.push(0));geometry.setAttribute("skinWeight",new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.BufferAttribute(new Float32Array(_weights),BONESPERVERT)),geometry.setAttribute("skinIndex",new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.BufferAttribute(new Float32Array(_bones),BONESPERVERT))}return 0==this.mBones.length&&(mesh=new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Mesh(geometry,mat)),this.mBones.length>0&&(mesh=new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.SkinnedMesh(geometry,mat)).normalizeSkinWeights(),this.threeNode=mesh,mesh}}function aiFace(){this.mNumIndices=0,this.mIndices=[]}function aiVector3D(){this.x=0,this.y=0,this.z=0,this.toTHREE=function(){return new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector3(this.x,this.y,this.z)}}function aiColor3D(){this.r=0,this.g=0,this.b=0,this.a=0,this.toTHREE=function(){return new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Color(this.r,this.g,this.b)}}function aiQuaternion(){this.x=0,this.y=0,this.z=0,this.w=0,this.toTHREE=function(){return new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Quaternion(this.x,this.y,this.z,this.w)}}function aiVertexWeight(){this.mVertexId=0,this.mWeight=0}function aiString(){this.data=[],this.toString=function(){var str="";return this.data.forEach((function(i){str+=String.fromCharCode(i)})),str.replace(/[^\x20-\x7E]+/g,"")}}function aiVectorKey(){this.mTime=0,this.mValue=null}function aiQuatKey(){this.mTime=0,this.mValue=null}function aiNode(){this.mName="",this.mTransformation=[],this.mNumChildren=0,this.mNumMeshes=0,this.mMeshes=[],this.mChildren=[],this.toTHREE=function(scene){if(this.threeNode)return this.threeNode;var o=new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Object3D;o.name=this.mName,o.matrix=this.mTransformation.toTHREE();for(var i=0;i<this.mChildren.length;i++)o.add(this.mChildren[i].toTHREE(scene));for(i=0;i<this.mMeshes.length;i++)o.add(scene.mMeshes[this.mMeshes[i]].toTHREE(scene));return this.threeNode=o,o.matrix.decompose(o.position,o.quaternion,o.scale),o}}function aiBone(){this.mName="",this.mNumWeights=0,this.mOffsetMatrix=0}function aiMaterialProperty(){this.mKey="",this.mSemantic=0,this.mIndex=0,this.mData=[],this.mDataLength=0,this.mType=0,this.dataAsColor=function(){var array=new Uint8Array(this.mData).buffer,reader=new DataView(array),r=reader.getFloat32(0,!0),g=reader.getFloat32(4,!0),b=reader.getFloat32(8,!0);return new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Color(r,g,b)},this.dataAsFloat=function(){var array=new Uint8Array(this.mData).buffer;return new DataView(array).getFloat32(0,!0)},this.dataAsBool=function(){var array=new Uint8Array(this.mData).buffer;return!!new DataView(array).getFloat32(0,!0)},this.dataAsString=function(){var s=new aiString;return s.data=this.mData,s.toString()},this.dataAsMap=function(){var s=new aiString;s.data=this.mData;var path=s.toString();return-1!=(path=path.replace(/\\/g,"/")).indexOf("/")&&(path=path.substr(path.lastIndexOf("/")+1)),textureLoader.load(path)}}var namePropMapping={"?mat.name":"name","$mat.shadingm":"shading","$mat.twosided":"twoSided","$mat.wireframe":"wireframe","$clr.ambient":"ambient","$clr.diffuse":"color","$clr.specular":"specular","$clr.emissive":"emissive","$clr.transparent":"transparent","$clr.reflective":"reflect","$mat.shininess":"shininess","$mat.reflectivity":"reflectivity","$mat.refracti":"refraction","$tex.file":"map"},nameTypeMapping={"?mat.name":"string","$mat.shadingm":"bool","$mat.twosided":"bool","$mat.wireframe":"bool","$clr.ambient":"color","$clr.diffuse":"color","$clr.specular":"color","$clr.emissive":"color","$clr.transparent":"color","$clr.reflective":"color","$mat.shininess":"float","$mat.reflectivity":"float","$mat.refracti":"float","$tex.file":"map"};function aiMaterial(){this.mNumAllocated=0,this.mNumProperties=0,this.mProperties=[],this.toTHREE=function(){for(var mat=new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.MeshPhongMaterial,i=0;i<this.mProperties.length;i++)if("float"==nameTypeMapping[this.mProperties[i].mKey]&&(mat[namePropMapping[this.mProperties[i].mKey]]=this.mProperties[i].dataAsFloat()),"color"==nameTypeMapping[this.mProperties[i].mKey]&&(mat[namePropMapping[this.mProperties[i].mKey]]=this.mProperties[i].dataAsColor()),"bool"==nameTypeMapping[this.mProperties[i].mKey]&&(mat[namePropMapping[this.mProperties[i].mKey]]=this.mProperties[i].dataAsBool()),"string"==nameTypeMapping[this.mProperties[i].mKey]&&(mat[namePropMapping[this.mProperties[i].mKey]]=this.mProperties[i].dataAsString()),"map"==nameTypeMapping[this.mProperties[i].mKey]){var prop=this.mProperties[i];prop.mSemantic==aiTextureType_DIFFUSE&&(mat.map=this.mProperties[i].dataAsMap()),prop.mSemantic==aiTextureType_NORMALS&&(mat.normalMap=this.mProperties[i].dataAsMap()),prop.mSemantic==aiTextureType_LIGHTMAP&&(mat.lightMap=this.mProperties[i].dataAsMap()),prop.mSemantic==aiTextureType_OPACITY&&(mat.alphaMap=this.mProperties[i].dataAsMap())}return mat.ambient.r=.53,mat.ambient.g=.53,mat.ambient.b=.53,mat.color.r=1,mat.color.g=1,mat.color.b=1,mat}}function veclerp(v1,v2,l){var v=new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Vector3,lm1=1-l;return v.x=v1.x*l+v2.x*lm1,v.y=v1.y*l+v2.y*lm1,v.z=v1.z*l+v2.z*lm1,v}function quatlerp(q1,q2,l){return q1.clone().slerp(q2,1-l)}function sampleTrack(keys,time,lne,lerp){if(1==keys.length)return keys[0].mValue.toTHREE();for(var dist=1/0,key=null,nextKey=null,i=0;i<keys.length;i++){var timeDist=Math.abs(keys[i].mTime-time);timeDist<dist&&keys[i].mTime<=time&&(dist=timeDist,key=keys[i],nextKey=keys[i+1])}if(key){if(nextKey){var dT=nextKey.mTime-key.mTime,l=(key.mTime-time)/dT;return lerp(key.mValue.toTHREE(),nextKey.mValue.toTHREE(),l)}(nextKey=keys[0].clone()).mTime+=lne;dT=nextKey.mTime-key.mTime,l=(key.mTime-time)/dT;return lerp(key.mValue.toTHREE(),nextKey.mValue.toTHREE(),l)}return null}function aiNodeAnim(){this.mNodeName="",this.mNumPositionKeys=0,this.mNumRotationKeys=0,this.mNumScalingKeys=0,this.mPositionKeys=[],this.mRotationKeys=[],this.mScalingKeys=[],this.mPreState="",this.mPostState="",this.init=function(tps){function t(t){t.mTime/=tps}tps||(tps=1),this.mPositionKeys.forEach(t),this.mRotationKeys.forEach(t),this.mScalingKeys.forEach(t)},this.sortKeys=function(){function comp(a,b){return a.mTime-b.mTime}this.mPositionKeys.sort(comp),this.mRotationKeys.sort(comp),this.mScalingKeys.sort(comp)},this.getLength=function(){return Math.max(Math.max.apply(null,this.mPositionKeys.map((function(a){return a.mTime}))),Math.max.apply(null,this.mRotationKeys.map((function(a){return a.mTime}))),Math.max.apply(null,this.mScalingKeys.map((function(a){return a.mTime}))))},this.toTHREE=function(o){this.sortKeys();for(var length=this.getLength(),track=new Virtulous.KeyFrameTrack,i=0;i<length;i+=.05){var matrix=new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Matrix4,time=i,pos=sampleTrack(this.mPositionKeys,time,length,veclerp),scale=sampleTrack(this.mScalingKeys,time,length,veclerp),rotation=sampleTrack(this.mRotationKeys,time,length,quatlerp);matrix.compose(pos,rotation,scale);var key=new Virtulous.KeyFrame(time,matrix);track.addKey(key)}track.target=o.findNode(this.mNodeName).toTHREE();var tracks=[track];if(o.nodeToBoneMap[this.mNodeName])for(i=0;i<o.nodeToBoneMap[this.mNodeName].length;i++){var t2=track.clone();t2.target=o.nodeToBoneMap[this.mNodeName][i],tracks.push(t2)}return tracks}}function aiAnimation(){this.mName="",this.mDuration=0,this.mTicksPerSecond=0,this.mNumChannels=0,this.mChannels=[],this.toTHREE=function(root){var animationHandle=new Virtulous.Animation;for(var i in this.mChannels){this.mChannels[i].init(this.mTicksPerSecond);var tracks=this.mChannels[i].toTHREE(root);for(var j in tracks)tracks[j].init(),animationHandle.addTrack(tracks[j])}return animationHandle.length=Math.max.apply(null,animationHandle.tracks.map((function(e){return e.length}))),animationHandle}}function aiTexture(){this.mWidth=0,this.mHeight=0,this.texAchFormatHint=[],this.pcData=[]}function aiLight(){this.mName="",this.mType=0,this.mAttenuationConstant=0,this.mAttenuationLinear=0,this.mAttenuationQuadratic=0,this.mAngleInnerCone=0,this.mAngleOuterCone=0,this.mColorDiffuse=null,this.mColorSpecular=null,this.mColorAmbient=null}function aiCamera(){this.mName="",this.mPosition=null,this.mLookAt=null,this.mUp=null,this.mHorizontalFOV=0,this.mClipPlaneNear=0,this.mClipPlaneFar=0,this.mAspect=0}function aiScene(){this.versionMajor=0,this.versionMinor=0,this.versionRevision=0,this.compileFlags=0,this.mFlags=0,this.mNumMeshes=0,this.mNumMaterials=0,this.mNumAnimations=0,this.mNumTextures=0,this.mNumLights=0,this.mNumCameras=0,this.mRootNode=null,this.mMeshes=[],this.mMaterials=[],this.mAnimations=[],this.mLights=[],this.mCameras=[],this.nodeToBoneMap={},this.findNode=function(name,root){if(root||(root=this.mRootNode),root.mName==name)return root;for(var i=0;i<root.mChildren.length;i++){var ret=this.findNode(name,root.mChildren[i]);if(ret)return ret}return null},this.toTHREE=function(){this.nodeCount=0,function markBones(scene){for(var i in scene.mMeshes){var mesh=scene.mMeshes[i];for(var k in mesh.mBones){var boneNode=scene.findNode(mesh.mBones[k].mName);boneNode&&(boneNode.isBone=!0)}}}(this);var o=this.mRootNode.toTHREE(this);for(var i in this.mMeshes)this.mMeshes[i].hookupSkeletons(this);if(this.mAnimations.length>0)var a=this.mAnimations[0].toTHREE(this);return{object:o,animation:a}}}function aiMatrix4(){this.elements=[[],[],[],[]],this.toTHREE=function(){for(var m=new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Matrix4,i=0;i<4;++i)for(var i2=0;i2<4;++i2)m.elements[4*i+i2]=this.elements[i2][i];return m}}var littleEndian=!0;function readFloat(dataview){var val=dataview.getFloat32(dataview.readOffset,littleEndian);return dataview.readOffset+=4,val}function Read_double(dataview){var val=dataview.getFloat64(dataview.readOffset,littleEndian);return dataview.readOffset+=8,val}function Read_uint16_t(dataview){var val=dataview.getUint16(dataview.readOffset,littleEndian);return dataview.readOffset+=2,val}function Read_unsigned_int(dataview){var val=dataview.getUint32(dataview.readOffset,littleEndian);return dataview.readOffset+=4,val}function Read_uint32_t(dataview){var val=dataview.getUint32(dataview.readOffset,littleEndian);return dataview.readOffset+=4,val}function Read_aiVector3D(stream){var v=new aiVector3D;return v.x=readFloat(stream),v.y=readFloat(stream),v.z=readFloat(stream),v}function Read_aiColor3D(stream){var c=new aiColor3D;return c.r=readFloat(stream),c.g=readFloat(stream),c.b=readFloat(stream),c}function Read_aiString(stream){var s=new aiString,stringlengthbytes=Read_unsigned_int(stream);return stream.ReadBytes(s.data,1,stringlengthbytes),s.toString()}function Read_aiVertexWeight(stream){var w=new aiVertexWeight;return w.mVertexId=Read_unsigned_int(stream),w.mWeight=readFloat(stream),w}function Read_aiMatrix4x4(stream){for(var m=new aiMatrix4,i=0;i<4;++i)for(var i2=0;i2<4;++i2)m.elements[i][i2]=readFloat(stream);return m}function Read_aiVectorKey(stream){var v=new aiVectorKey;return v.mTime=Read_double(stream),v.mValue=Read_aiVector3D(stream),v}function Read_aiQuatKey(stream){var v=new aiQuatKey;return v.mTime=Read_double(stream),v.mValue=function Read_aiQuaternion(stream){var v=new aiQuaternion;return v.w=readFloat(stream),v.x=readFloat(stream),v.y=readFloat(stream),v.z=readFloat(stream),v}(stream),v}function ReadArray_aiVectorKey(stream,data,size){for(var i=0;i<size;i++)data[i]=Read_aiVectorKey(stream)}function ReadBounds(stream,T,n){return stream.Seek(sizeof(T)*n,aiOrigin_CUR)}function ai_assert(bool){if(!bool)throw"asset failed"}function ReadBinaryBone(stream,b){return ai_assert(Read_uint32_t(stream)==ASSBIN_CHUNK_AIBONE),Read_uint32_t(stream),b.mName=Read_aiString(stream),b.mNumWeights=Read_unsigned_int(stream),b.mOffsetMatrix=Read_aiMatrix4x4(stream),shortened?ReadBounds(stream,b.mWeights,b.mNumWeights):(b.mWeights=[],function ReadArray_aiVertexWeight(stream,data,size){for(var i=0;i<size;i++)data[i]=Read_aiVertexWeight(stream)}(stream,b.mWeights,b.mNumWeights)),b}function ReadBinaryMesh(stream,mesh){ai_assert(Read_uint32_t(stream)==ASSBIN_CHUNK_AIMESH),Read_uint32_t(stream),mesh.mPrimitiveTypes=Read_unsigned_int(stream),mesh.mNumVertices=Read_unsigned_int(stream),mesh.mNumFaces=Read_unsigned_int(stream),mesh.mNumBones=Read_unsigned_int(stream),mesh.mMaterialIndex=Read_unsigned_int(stream),mesh.mNumUVComponents=[];var c=Read_unsigned_int(stream);c&ASSBIN_MESH_HAS_POSITIONS&&(shortened?ReadBounds(stream,mesh.mVertices,mesh.mNumVertices):(mesh.mVertices=[],mesh.mVertexBuffer=stream.subArray32(stream.readOffset,stream.readOffset+3*mesh.mNumVertices*4),stream.Seek(3*mesh.mNumVertices*4,aiOrigin_CUR))),c&ASSBIN_MESH_HAS_NORMALS&&(shortened?ReadBounds(stream,mesh.mNormals,mesh.mNumVertices):(mesh.mNormals=[],mesh.mNormalBuffer=stream.subArray32(stream.readOffset,stream.readOffset+3*mesh.mNumVertices*4),stream.Seek(3*mesh.mNumVertices*4,aiOrigin_CUR))),c&ASSBIN_MESH_HAS_TANGENTS_AND_BITANGENTS&&(shortened?(ReadBounds(stream,mesh.mTangents,mesh.mNumVertices),ReadBounds(stream,mesh.mBitangents,mesh.mNumVertices)):(mesh.mTangents=[],mesh.mTangentBuffer=stream.subArray32(stream.readOffset,stream.readOffset+3*mesh.mNumVertices*4),stream.Seek(3*mesh.mNumVertices*4,aiOrigin_CUR),mesh.mBitangents=[],mesh.mBitangentBuffer=stream.subArray32(stream.readOffset,stream.readOffset+3*mesh.mNumVertices*4),stream.Seek(3*mesh.mNumVertices*4,aiOrigin_CUR)));for(var n=0;n<AI_MAX_NUMBER_OF_COLOR_SETS&&c&ASSBIN_MESH_HAS_COLOR(n);++n)shortened?ReadBounds(stream,mesh.mColors[n],mesh.mNumVertices):(mesh.mColors[n]=[],mesh.mColorBuffer=stream.subArray32(stream.readOffset,stream.readOffset+4*mesh.mNumVertices*4),stream.Seek(4*mesh.mNumVertices*4,aiOrigin_CUR));mesh.mTexCoordsBuffers=[];for(n=0;n<AI_MAX_NUMBER_OF_TEXTURECOORDS&&c&ASSBIN_MESH_HAS_TEXCOORD(n);++n)if(mesh.mNumUVComponents[n]=Read_unsigned_int(stream),shortened)ReadBounds(stream,mesh.mTextureCoords[n],mesh.mNumVertices);else{mesh.mTextureCoords[n]=[],mesh.mTexCoordsBuffers[n]=[];for(var uv=0;uv<mesh.mNumVertices;uv++)mesh.mTexCoordsBuffers[n].push(readFloat(stream)),mesh.mTexCoordsBuffers[n].push(readFloat(stream)),readFloat(stream)}if(shortened)Read_unsigned_int(stream);else{mesh.mFaces=[],mesh.mIndexArray=[];for(var i=0;i<mesh.mNumFaces;++i){var f=mesh.mFaces[i]=new aiFace;f.mNumIndices=Read_uint16_t(stream),f.mIndices=[];for(var a=0;a<f.mNumIndices;++a)mesh.mNumVertices<65536?f.mIndices[a]=Read_uint16_t(stream):f.mIndices[a]=Read_unsigned_int(stream);if(3===f.mNumIndices)mesh.mIndexArray.push(f.mIndices[0]),mesh.mIndexArray.push(f.mIndices[1]),mesh.mIndexArray.push(f.mIndices[2]);else{if(4!==f.mNumIndices)throw new Error("Sorry, can't currently triangulate polys. Use the triangulate preprocessor in Assimp.");mesh.mIndexArray.push(f.mIndices[0]),mesh.mIndexArray.push(f.mIndices[1]),mesh.mIndexArray.push(f.mIndices[2]),mesh.mIndexArray.push(f.mIndices[2]),mesh.mIndexArray.push(f.mIndices[3]),mesh.mIndexArray.push(f.mIndices[0])}}}if(mesh.mNumBones){mesh.mBones=[];for(a=0;a<mesh.mNumBones;++a)mesh.mBones[a]=new aiBone,ReadBinaryBone(stream,mesh.mBones[a])}}function ReadBinaryMaterialProperty(stream,prop){ai_assert(Read_uint32_t(stream)==ASSBIN_CHUNK_AIMATERIALPROPERTY),Read_uint32_t(stream),prop.mKey=Read_aiString(stream),prop.mSemantic=Read_unsigned_int(stream),prop.mIndex=Read_unsigned_int(stream),prop.mDataLength=Read_unsigned_int(stream),prop.mType=Read_unsigned_int(stream),prop.mData=[],stream.ReadBytes(prop.mData,1,prop.mDataLength)}function ReadBinaryMaterial(stream,mat){if(ai_assert(Read_uint32_t(stream)==ASSBIN_CHUNK_AIMATERIAL),Read_uint32_t(stream),mat.mNumAllocated=mat.mNumProperties=Read_unsigned_int(stream),mat.mNumProperties){mat.mProperties&&delete mat.mProperties,mat.mProperties=[];for(var i=0;i<mat.mNumProperties;++i)mat.mProperties[i]=new aiMaterialProperty,ReadBinaryMaterialProperty(stream,mat.mProperties[i])}}function ReadBinaryNodeAnim(stream,nd){ai_assert(Read_uint32_t(stream)==ASSBIN_CHUNK_AINODEANIM),Read_uint32_t(stream),nd.mNodeName=Read_aiString(stream),nd.mNumPositionKeys=Read_unsigned_int(stream),nd.mNumRotationKeys=Read_unsigned_int(stream),nd.mNumScalingKeys=Read_unsigned_int(stream),nd.mPreState=Read_unsigned_int(stream),nd.mPostState=Read_unsigned_int(stream),nd.mNumPositionKeys&&(shortened?ReadBounds(stream,nd.mPositionKeys,nd.mNumPositionKeys):(nd.mPositionKeys=[],ReadArray_aiVectorKey(stream,nd.mPositionKeys,nd.mNumPositionKeys))),nd.mNumRotationKeys&&(shortened?ReadBounds(stream,nd.mRotationKeys,nd.mNumRotationKeys):(nd.mRotationKeys=[],function ReadArray_aiQuatKey(stream,data,size){for(var i=0;i<size;i++)data[i]=Read_aiQuatKey(stream)}(stream,nd.mRotationKeys,nd.mNumRotationKeys))),nd.mNumScalingKeys&&(shortened?ReadBounds(stream,nd.mScalingKeys,nd.mNumScalingKeys):(nd.mScalingKeys=[],ReadArray_aiVectorKey(stream,nd.mScalingKeys,nd.mNumScalingKeys)))}function ReadBinaryAnim(stream,anim){if(ai_assert(Read_uint32_t(stream)==ASSBIN_CHUNK_AIANIMATION),Read_uint32_t(stream),anim.mName=Read_aiString(stream),anim.mDuration=Read_double(stream),anim.mTicksPerSecond=Read_double(stream),anim.mNumChannels=Read_unsigned_int(stream),anim.mNumChannels){anim.mChannels=[];for(var a=0;a<anim.mNumChannels;++a)anim.mChannels[a]=new aiNodeAnim,ReadBinaryNodeAnim(stream,anim.mChannels[a])}}function ReadBinaryTexture(stream,tex){ai_assert(Read_uint32_t(stream)==ASSBIN_CHUNK_AITEXTURE),Read_uint32_t(stream),tex.mWidth=Read_unsigned_int(stream),tex.mHeight=Read_unsigned_int(stream),stream.ReadBytes(tex.achFormatHint,1,4),shortened||(tex.mHeight?(tex.pcData=[],stream.ReadBytes(tex.pcData,1,tex.mWidth*tex.mHeight*4)):(tex.pcData=[],stream.ReadBytes(tex.pcData,1,tex.mWidth)))}function ReadBinaryLight(stream,l){ai_assert(Read_uint32_t(stream)==ASSBIN_CHUNK_AILIGHT),Read_uint32_t(stream),l.mName=Read_aiString(stream),l.mType=Read_unsigned_int(stream),l.mType!=aiLightSource_DIRECTIONAL&&(l.mAttenuationConstant=readFloat(stream),l.mAttenuationLinear=readFloat(stream),l.mAttenuationQuadratic=readFloat(stream)),l.mColorDiffuse=Read_aiColor3D(stream),l.mColorSpecular=Read_aiColor3D(stream),l.mColorAmbient=Read_aiColor3D(stream),l.mType==aiLightSource_SPOT&&(l.mAngleInnerCone=readFloat(stream),l.mAngleOuterCone=readFloat(stream))}function ReadBinaryCamera(stream,cam){ai_assert(Read_uint32_t(stream)==ASSBIN_CHUNK_AICAMERA),Read_uint32_t(stream),cam.mName=Read_aiString(stream),cam.mPosition=Read_aiVector3D(stream),cam.mLookAt=Read_aiVector3D(stream),cam.mUp=Read_aiVector3D(stream),cam.mHorizontalFOV=readFloat(stream),cam.mClipPlaneNear=readFloat(stream),cam.mClipPlaneFar=readFloat(stream),cam.mAspect=readFloat(stream)}function ReadBinaryScene(stream,scene){if(ai_assert(Read_uint32_t(stream)==ASSBIN_CHUNK_AISCENE),Read_uint32_t(stream),scene.mFlags=Read_unsigned_int(stream),scene.mNumMeshes=Read_unsigned_int(stream),scene.mNumMaterials=Read_unsigned_int(stream),scene.mNumAnimations=Read_unsigned_int(stream),scene.mNumTextures=Read_unsigned_int(stream),scene.mNumLights=Read_unsigned_int(stream),scene.mNumCameras=Read_unsigned_int(stream),scene.mRootNode=new aiNode,scene.mRootNode=function ReadBinaryNode(stream,parent,depth){ai_assert(Read_uint32_t(stream)==ASSBIN_CHUNK_AINODE),Read_uint32_t(stream);var node=new aiNode;if(node.mParent=parent,node.mDepth=depth,node.mName=Read_aiString(stream),node.mTransformation=Read_aiMatrix4x4(stream),node.mNumChildren=Read_unsigned_int(stream),node.mNumMeshes=Read_unsigned_int(stream),node.mNumMeshes){node.mMeshes=[];for(var i=0;i<node.mNumMeshes;++i)node.mMeshes[i]=Read_unsigned_int(stream)}if(node.mNumChildren){node.mChildren=[];for(i=0;i<node.mNumChildren;++i){var node2=ReadBinaryNode(stream,node,depth++);node.mChildren[i]=node2}}return node}(stream,null,0),scene.mNumMeshes){scene.mMeshes=[];for(var i=0;i<scene.mNumMeshes;++i)scene.mMeshes[i]=new aiMesh,ReadBinaryMesh(stream,scene.mMeshes[i])}if(scene.mNumMaterials){scene.mMaterials=[];for(i=0;i<scene.mNumMaterials;++i)scene.mMaterials[i]=new aiMaterial,ReadBinaryMaterial(stream,scene.mMaterials[i])}if(scene.mNumAnimations){scene.mAnimations=[];for(i=0;i<scene.mNumAnimations;++i)scene.mAnimations[i]=new aiAnimation,ReadBinaryAnim(stream,scene.mAnimations[i])}if(scene.mNumTextures){scene.mTextures=[];for(i=0;i<scene.mNumTextures;++i)scene.mTextures[i]=new aiTexture,ReadBinaryTexture(stream,scene.mTextures[i])}if(scene.mNumLights){scene.mLights=[];for(i=0;i<scene.mNumLights;++i)scene.mLights[i]=new aiLight,ReadBinaryLight(stream,scene.mLights[i])}if(scene.mNumCameras){scene.mCameras=[];for(i=0;i<scene.mNumCameras;++i)scene.mCameras[i]=new aiCamera,ReadBinaryCamera(stream,scene.mCameras[i])}}var shortened,compressed,aiOrigin_CUR=0,aiOrigin_BEG=1;return function InternReadFile(pFiledata){var pScene=new aiScene,stream=new DataView(pFiledata);if(function extendStream(stream){stream.readOffset=0,stream.Seek=function(off,ori){ori==aiOrigin_CUR&&(stream.readOffset+=off),ori==aiOrigin_BEG&&(stream.readOffset=off)},stream.ReadBytes=function(buff,size,n){for(var dataview,val,bytes=size*n,i=0;i<bytes;i++)buff[i]=(val=void 0,val=(dataview=this).getUint8(dataview.readOffset),dataview.readOffset+=1,val)},stream.subArray32=function(start,end){var newbuff=this.buffer.slice(start,end);return new Float32Array(newbuff)},stream.subArrayUint16=function(start,end){var newbuff=this.buffer.slice(start,end);return new Uint16Array(newbuff)},stream.subArrayUint8=function(start,end){var newbuff=this.buffer.slice(start,end);return new Uint8Array(newbuff)},stream.subArrayUint32=function(start,end){var newbuff=this.buffer.slice(start,end);return new Uint32Array(newbuff)}}(stream),stream.Seek(44,aiOrigin_CUR),pScene.versionMajor=Read_unsigned_int(stream),pScene.versionMinor=Read_unsigned_int(stream),pScene.versionRevision=Read_unsigned_int(stream),pScene.compileFlags=Read_unsigned_int(stream),shortened=Read_uint16_t(stream)>0,compressed=Read_uint16_t(stream)>0,shortened)throw"Shortened binaries are not supported!";if(stream.Seek(256,aiOrigin_CUR),stream.Seek(128,aiOrigin_CUR),stream.Seek(64,aiOrigin_CUR),compressed){var uncompressedSize=Read_uint32_t(stream),compressedSize=stream.FileSize()-stream.Tell(),compressedData=[];stream.Read(compressedData,1,compressedSize);var uncompressedData=[];uncompress(uncompressedData,uncompressedSize,compressedData,compressedSize),ReadBinaryScene(new ArrayBuffer(uncompressedData),pScene)}else ReadBinaryScene(stream,pScene);return pScene.toTHREE()}(buffer)}})}}]);
//# sourceMappingURL=31.65c5b6ed6f5a0a577471.bundle.js.map