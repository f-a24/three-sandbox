(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{300:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var three_module=__webpack_require__(598),WEBVR_createButton=function(renderer,options){function showEnterVR(device){button.style.display="",button.style.cursor="pointer",button.style.left="calc(50% - 50px)",button.style.width="100px",button.textContent="ENTER VR",button.onmouseenter=function(){button.style.opacity="1.0"},button.onmouseleave=function(){button.style.opacity="0.5"},button.onclick=function(){device.isPresenting?device.exitPresent():device.requestPresent([{source:renderer.domElement}])},renderer.vr.setDevice(device)}function disableButton(){button.style.display="",button.style.cursor="auto",button.style.left="calc(50% - 75px)",button.style.width="150px",button.onmouseenter=null,button.onmouseleave=null,button.onclick=null}function showVRNotFound(){disableButton(),button.textContent="VR NOT FOUND",renderer.vr.setDevice(null)}function stylizeElement(element){element.style.position="absolute",element.style.bottom="20px",element.style.padding="12px 6px",element.style.border="1px solid #fff",element.style.borderRadius="4px",element.style.background="rgba(0,0,0,0.1)",element.style.color="#fff",element.style.font="normal 13px sans-serif",element.style.textAlign="center",element.style.opacity="0.5",element.style.outline="none",element.style.zIndex="999"}var button;if(options&&options.referenceSpaceType&&renderer.vr.setReferenceSpaceType(options.referenceSpaceType),"xr"in navigator&&"supportsSession"in navigator.xr)return(button=document.createElement("button")).style.display="none",stylizeElement(button),navigator.xr.supportsSession("immersive-vr").then((function showEnterXR(){var currentSession=null;function onSessionStarted(session){session.addEventListener("end",onSessionEnded),renderer.vr.setSession(session),button.textContent="EXIT XR",currentSession=session}function onSessionEnded(){currentSession.removeEventListener("end",onSessionEnded),renderer.vr.setSession(null),button.textContent="ENTER XR",currentSession=null}button.style.display="",button.style.cursor="pointer",button.style.left="calc(50% - 50px)",button.style.width="100px",button.textContent="ENTER XR",button.onmouseenter=function(){button.style.opacity="1.0"},button.onmouseleave=function(){button.style.opacity="0.5"},button.onclick=function(){null===currentSession?navigator.xr.requestSession("immersive-vr").then(onSessionStarted):currentSession.end()}})).catch((function showXRNotFound(){disableButton(),button.textContent="XR NOT FOUND"})),button;if("getVRDisplays"in navigator)return(button=document.createElement("button")).style.display="none",stylizeElement(button),window.addEventListener("vrdisplayconnect",(function(event){showEnterVR(event.display)}),!1),window.addEventListener("vrdisplaydisconnect",(function(){showVRNotFound()}),!1),window.addEventListener("vrdisplaypresentchange",(function(event){button.textContent=event.display.isPresenting?"EXIT VR":"ENTER VR"}),!1),window.addEventListener("vrdisplayactivate",(function(event){event.display.requestPresent([{source:renderer.domElement}])}),!1),navigator.getVRDisplays().then((function(displays){displays.length>0?showEnterVR(displays[0]):showVRNotFound()})).catch(showVRNotFound),button;var message=document.createElement("a");return message.href="https://webvr.info",message.innerHTML="WEBVR NOT SUPPORTED",message.style.left="calc(50% - 90px)",message.style.width="180px",message.style.textDecoration="none",stylizeElement(message),message},SceneUtils=__webpack_require__(600);__webpack_exports__.default=function(){var VIEWPORT_W=window.innerWidth,VIEWPORT_H=window.innerHeight,scene=new three_module.Scene,camera=new three_module.PerspectiveCamera(45,window.innerWidth/window.innerHeight,.1,1e3);camera.position.x=8,camera.lookAt(new three_module.Vector3(0,0,0));var renderer=new three_module.WebGLRenderer;renderer.setClearColor(new three_module.Color(0)),renderer.setSize(VIEWPORT_W,VIEWPORT_H);var selectedDebri,geom,textureLoader,planetTexture,specularTexture,normalTexture,planetMaterial,raycaster=new three_module.Raycaster,createStarPoints=function(num,size,center,radius,red){for(var geom=new three_module.Geometry,texture=(new three_module.TextureLoader).load(red?"./assets/lensflare0.png":"./assets/lensflare0_white.png"),material=new three_module.PointsMaterial({size:size,map:texture}),i=0;i<num;i++){var theta=2*Math.random()*Math.PI,phi=2*Math.random()*Math.PI,r=radius*(1.5+Math.random()/10),particle=new three_module.Vector3(r*Math.sin(theta)*Math.cos(phi),r*Math.sin(theta)*Math.sin(phi),r*Math.cos(theta));geom.vertices.push(particle)}return new three_module.Points(geom,material)},putDebriRandom=function(mesh,limitRadius,center){var theta=2*Math.random()*Math.PI,phi=2*Math.random()*Math.PI,r=2*limitRadius+Math.random()/100;mesh.position.set(center.x+r*Math.sin(theta)*Math.cos(phi),center.y+r*Math.sin(theta)*Math.sin(phi),center.z+r*Math.cos(theta))},createDebri=function(limitRadius,center){var geom=new three_module.BoxGeometry(1,1,1),material=new three_module.MeshPhongMaterial;material.color=new three_module.Color(16777215*Math.random()),material.emissive=new three_module.Color(3355443),material.specular=new three_module.Color(4474026),material.shininess=100;var mesh=new three_module.Mesh(geom,material);return putDebriRandom(mesh,limitRadius,center),mesh.rotation.x=2*Math.random()*Math.PI,mesh.rotation.y=2*Math.random()*Math.PI,mesh.rotation.z=2*Math.random()*Math.PI,mesh.drotx=(Math.random()-.5)/10,mesh.droty=(Math.random()-.5)/10,mesh.drotz=(Math.random()-.5)/10,mesh},deselectDebri=function(){selectedDebri&&(selectedDebri.material.emissive.setHex(3355443),selectedDebri.scale.set(1,1,1)),selectedDebri=null},earth=(geom=new three_module.SphereGeometry(10,80,80),textureLoader=new three_module.TextureLoader,planetTexture=textureLoader.load("./assets/Earth.png"),specularTexture=textureLoader.load("./assets/EarthSpec.png"),normalTexture=textureLoader.load("./assets/EarthNormal.png"),(planetMaterial=new three_module.MeshPhongMaterial).specularMap=specularTexture,planetMaterial.specular=new three_module.Color(4474026),planetMaterial.shininess=5,planetMaterial.normalMap=normalTexture,planetMaterial.normalScale=new three_module.Vector2(5,5),planetMaterial.map=planetTexture,SceneUtils.a.createMultiMaterialObject(geom,[planetMaterial]));earth.position.y=-10,scene.add(earth);var air=function(geom){var planetMaterial=new three_module.MeshPhongMaterial;return planetMaterial.side=three_module.BackSide,planetMaterial.transparent=!0,planetMaterial.opacity=.2,planetMaterial.color=new three_module.Color(16777215),SceneUtils.a.createMultiMaterialObject(geom,[planetMaterial])}(new three_module.SphereGeometry(10.1,80,80));air.position.copy(earth.position),scene.add(air);var moon=function(geom){var textureLoader=new three_module.TextureLoader,planetTexture=textureLoader.load("./assets/Moon.png"),normalTexture=textureLoader.load("./assets/Mars-normalmap_2k.png"),planetMaterial=new three_module.MeshPhongMaterial;return planetMaterial.normalMap=normalTexture,planetMaterial.normalScale=new three_module.Vector2(5,5),planetMaterial.map=planetTexture,planetMaterial.specularMap=planetTexture,planetMaterial.specular=new three_module.Color(4473856),planetMaterial.shininess=0,new three_module.Mesh(geom,planetMaterial)}(new three_module.SphereGeometry(5,20,20));moon.position.x=-50,earth.add(moon);earth.position;var rad=Math.abs(moon.position.x);earth.add(createStarPoints(100,5,0,rad,!0)),earth.add(createStarPoints(500,3,0,rad)),earth.add(createStarPoints(2e3,2,0,rad));for(var earthAndDebris=[earth],debris=[],i=0;i<30;i++){var debri=createDebri(10.2,earth.position);earth.add(debri),debris.push(debri);var earthGroup=new three_module.Group;earthGroup.add(debri),earthAndDebris.push(earthGroup)}var ambi=new three_module.AmbientLight(1579032);scene.add(ambi);var directionalLight=new three_module.DirectionalLight(16777215);directionalLight.position.set(100,0,150),earth.add(directionalLight);var directionalBackLight=new three_module.DirectionalLight(16777215);directionalBackLight.position.copy(directionalLight.position.clone().negate()),directionalBackLight.intensity=.7,earth.add(directionalBackLight),document.getElementById("WebGL-output").appendChild(renderer.domElement),document.body.appendChild(WEBVR_createButton(renderer,void 0)),renderer.domElement.addEventListener("click",function(){if(document.mozFullScreen||document.webkitIsFullScreen)limitRadius=10.2,center=earth.position,selectedDebri&&(putDebriRandom(selectedDebri,limitRadius,center),deselectDebri());else{var canvas=renderer.domElement;(canvas.mozRequestFullScreen||canvas.webkitRequestFullScreen).bind(canvas)()}var limitRadius,center}.bind(void 0)),window.addEventListener("resize",(function(){camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight)}),!1);var renderScene=function(){debris.forEach((function(debri){debri.rotation.x+=debri.drotx,debri.rotation.y+=debri.droty,debri.rotation.z+=debri.drotz})),function(){raycaster.setFromCamera({x:0,y:0},camera);var intersects=raycaster.intersectObjects(earthAndDebris);if(0===intersects.length)deselectDebri();else for(var i=0;i<intersects.length;i++){var debri=intersects[i].object;if(debri===earth){console.log(debri===earth);break}if(selectedDebri!==debri){deselectDebri(),selectedDebri=debri,debri.material.emissive.setHex(16724787),debri.scale.set(2,2,2);break}}}(),earth.rotation.z-=.001,requestAnimationFrame(renderScene)};renderScene()}},600:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SceneUtils}));var _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(598),SceneUtils={createMultiMaterialObject:function(geometry,materials){for(var group=new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Group,i=0,l=materials.length;i<l;i++)group.add(new _build_three_module_js__WEBPACK_IMPORTED_MODULE_0__.Mesh(geometry,materials[i]));return group},detach:function(child,parent,scene){console.warn("THREE.SceneUtils: detach() has been deprecated. Use scene.attach( child ) instead."),scene.attach(child)},attach:function(child,scene,parent){console.warn("THREE.SceneUtils: attach() has been deprecated. Use parent.attach( child ) instead."),parent.attach(child)}}}}]);
//# sourceMappingURL=77.53f8f83f2eec7c90b531.bundle.js.map